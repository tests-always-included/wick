#!/usr/bin/env bash

github-get-archive() {
    wickGetArgument repo 0 "$@"
    wickGetOption tag tag "$@"
    wickGetOption dest dest "$@"
    wickGetOption username username "$@"
    wickGetOption password password "$@"
    : ${tag="master"}
    args=(-s -L)

    if [[ -n "$username" ]]; then
        args[${#args[@]}]="--user"
        args[${#args[@]}]="$username:$password"
    fi

    if [[ -n "$dest" ]]; then
        args[${#args[@]}]="-o"
        args[${#args[@]}]="$dest"
    fi
    curl ${args[@]} "https://github.com/$repo/tarball/$tag"
}
